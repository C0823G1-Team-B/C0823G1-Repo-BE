<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css">
</head>
<body>

<div>
    <h1 class="text-center">Tạo Tuyến xe</h1>
    <form  id="myForm" method="get" th:action="@{/api/ticket/createRoute}">
        <p>Điểm đi</p>
        <select   style="width: 400px;" name="departure" id="departureCity" class="search-select" onchange="handleDepartureCityChange()" required>
            <option  value="" selected>Chọn tỉnh thành</option>
        </select>

        <br>

        <p>Điểm đến</p>
        <select   style="width: 400px;" name="destination" id="city" class="search-select" onchange="handleCityChange()" required>
            <option value="" selected>Chọn tỉnh thành</option>
        </select>

        <input type="submit" value="Submit">

    </form>
</div>
<div th:if="${message}" th:text="${message}" class="success-message"></div>



</body>
</html>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

<script>
    const host = "https://provinces.open-api.vn/api/";

    var callAPI = (api, selectId) => {
        return axios.get(api)
            .then((response) => {
                renderData(response.data, selectId);
            });
    }

    callAPI('https://provinces.open-api.vn/api/?depth=1', 'departureCity');
    callAPI('https://provinces.open-api.vn/api/?depth=1', 'city');

    var renderData = (array, select) => {
        let row = '<option disable value="">Chọn</option>';
        array.forEach(element => {
            let option = `<option data-id="${element.code}" value="${element.name}" class="${select}-option">${element.name}</option>`;
            row += option;
        });
        document.querySelector("#" + select).innerHTML = row;
    }

    var handleDepartureCityChange = () => {
        printResult();
    };

    var handleCityChange = () => {
        printResult();
    };

    var isPastDateTime = (dateTimeString) => {
        let selectedDateTime = new Date(dateTimeString);
        let currentDateTime = new Date();
        return selectedDateTime < currentDateTime;
    }

    $("#startDateTime").change(() => {
        printResult();
    });

    var printResult = () => {
        let selectedDateTime = new Date($("#startDateTime").val());
        let currentDateTime = new Date();

        if ($("#departureCity").find(':selected').data('id') != "" && $("#city").find(':selected').data('id') != "" &&
            $("#startDateTime").val() !== "") {

        }
    }


    $(".search-select").select2();
</script>


<!--sssssss-->